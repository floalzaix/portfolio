<div id="home-page-container">
  <p-toast />
  <div
    appHomeTitleAnimation
    [idScrollableContainer]="'home-page-container'"
    [idLineTopLeft]="'home-title-left-line-v'"
    [idLineTopRight]="'home-title-left-line-h'"
    [idLineBottomRight]="'home-title-right-line-v'"
    [idLineBottomLeft]="'home-title-right-line-h'"
    [idBox]="'home-title-content'"
    id="home-title-container"
    class="home-container"
  >
    <!-- Left vertical line -->
    <div id="home-title-left-line-v-container">
      <div
        class="home-title-line"
        id="home-title-left-line-v"
      ></div>
    </div>

    <!-- Left horizontal line -->
    <div id="home-title-left-line-h-container">
      <div
      class="home-title-line"
        id="home-title-left-line-h"
      ></div>
    </div>

    <!-- Content -->
    <div id="home-title-content">
      <h1>Florian Alzaix</h1>
      <p>Freelance full stack development</p>
    </div>

    <!-- Right vertical line -->
    <div id="home-title-right-line-v-container">
      <div
        class="home-title-line"
        id="home-title-right-line-v"
      ></div>
    </div>

    <!-- Right horizontal line -->
    <div id="home-title-right-line-h-container">
      <div
        class="home-title-line"
        id="home-title-right-line-h"
      ></div>
    </div>
  </div>
  
  <div id="home-projects-container">
    @for (project of projects(); track project.title) {
      @let hasMedia = (project.image || project.video) !== undefined;

      <div
        class="home-project-container"
        [class.home-project-container-left]="$index % 2 === 0"
        [class.home-project-container-right]="$index % 2 !== 0"
      >

        <!-- Lines for animation -->
        @if (hasMedia) {
          <div class="v-line"></div>
        }

        @if (project.image) {
          <div class="home-project-media">
            <img [src]="project.image" [alt]="project.title" />
          </div>
        } 
        @if (project.video) {
          <div class="home-project-media">
            <video
              class="box"
              loop
              autoplay
              [muted]="true"
              playsinline
              alt="Project's video"
            >
              <source [src]="project.video" type="video/mp4">
              Your browser does not support the video tag.
            </video>
          </div>
        }

        <div class="home-project-content-container">
          <div
            appVLineAnimation
            [idScrollableContainer]="'home-page-container'"
            [enabled]="hasMedia"
            class="home-project-content"
            [style.align-self]="hasMedia ? 'flex-start' : 'center'"
            [style.width]="hasMedia ? '100%' : '80%'"
          >
            <h2>{{ project.title }}</h2>

            <p-fieldset [legend]="language() === 'en' ? 'Goal' : 'Objectif'">
              <p>{{ project.goal }}</p>
            </p-fieldset>

            <div class="home-project-details">
              <p-fieldset
                legend="Technologies"
                class="home-project-details-left"
              >
                <p-timeline
                  [value]="project.techs"
                  [align]="'alternate'"
                >
                  <ng-template #content let-tech>
                    {{ tech }}
                  </ng-template>
                </p-timeline>
              </p-fieldset>
              
              @if (project.note) {
                <p-fieldset
                  legend="Note"
                  class="home-project-details-right"
                >
                  <p>{{ project.note }}</p>
                  @if (project.link) {
                    <div class="home-project-details-right-button">
                      <a pButton [href]="project.link" target="_blank">
                        <i class="pi pi-external-link"></i>
                      </a>
                    </div>
                  }
                </p-fieldset>
              }
            </div>
          </div>
        </div>
      </div>
    }
  </div>

  <div id="home-contact-container">
    <div id="home-contact-content">
      <div class="home-content-line"></div>
      <div
        id="home-contact-content-email"
        (click)="copyToClipboard('floalzfencing@gmail.com')"
      >
        <i class="pi pi-copy" style="font-size: 0.8rem;"></i>
        <span>floalzfencing@gmail.com</span>
      </div>
      <div class="home-content-line"></div>
    </div>
  </div>

  <div id="home-menu-container">
    <div id="home-menu-content">
      <div class="home-content-line"></div>
      <p-button
        icon="pi pi-sun"
        (onClick)="toggleTheme()"
      /> 
      <div class="home-content-line"></div>
      <p-button
        icon="pi pi-language"
        (onClick)="language.set(language() === 'en' ? 'fr' : 'en')"
      /> 
      <div class="home-content-line"></div>
    </div>
  </div>
</div>
